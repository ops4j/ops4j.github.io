<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Pax UserAdmin - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          </head>
  <body class="composite">
    <div id="banner">
                    <span id="bannerLeft">
    
            org.ops4j.pax.useradmin
    
            </span>
                        <a href="" id="bannerRight">
    
                                            <img src="images/ops4j-logo.png" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Last Published: 2017-01-11
                  &nbsp;| Version: 1.0.0-SNAPSHOT
                      </div>
            <div class="xright">            <a href="http://wiki.ops4j.org/display/ops4j/Pax" class="externalLink">Pax</a>
            |
                <a href="http://www.osgi.org/" class="externalLink">OSGi</a>
            
  

  
    
            
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                   <h5>Pax UserAdmin</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Introduction</a>
          </li>
              
    <li class="none">
              <strong>Quickstart</strong>
        </li>
              
    <li class="none">
                    <a href="userguide.html">User Guide</a>
          </li>
          </ul>
              <h5>Bundles</h5>
            <ul>
              
    <li class="none">
                    <a href="bundles/service.html">pax-useradmin-service</a>
          </li>
              
                
              
      
            
      
              
        <li class="collapsed">
                    <a href="bundles/provider-preferences/overview.html">pax-useradmin-provider-preferences</a>
                </li>
              
                
              
      
            
      
              
        <li class="collapsed">
                    <a href="bundles/provider-ldap/overview.html">pax-useradmin-provider-ldap</a>
                </li>
              
    <li class="none">
                    <a href="bundles/command.html">pax-useradmin-command</a>
          </li>
          </ul>
              <h5>Other resources</h5>
            <ul>
              
    <li class="none">
                    <a href="http://wiki.ops4j.org/confluence/display/ops4j/Pax+UserAdmin" class="externalLink">Wiki</a>
          </li>
          </ul>
              <h5>Project Reports</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="reports/basic-reports.html">Basic Information</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="reports/dependency-reports.html">Dependencies</a>
                </li>
              
                
              
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="reports/sourceref-reports.html">JavaDoc & Source Xref</a>
                </li>
              
          
              
      
            
      
            
      
            
      
            
      
              
        <li class="expanded">
                    <a href="reports/management-reports.html">Project Management</a>
                  <ul>
                  
    <li class="none">
                    <a href="dashboard-report.html">Code Analysis DashBoard</a>
          </li>
                  
    <li class="none">
                    <a href="jira-report.html">Jira Issues</a>
          </li>
                  
    <li class="none">
                    <a href="changelog.html">Change Log</a>
          </li>
                  
    <li class="none">
                    <a href="dev-activity.html">Developer Activity</a>
          </li>
                  
    <li class="none">
                    <a href="file-activity.html">File Activity</a>
          </li>
              </ul>
        </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Quickstart</h2>
<p>Describes how to get started without fuzz - please read <a href="index.html">the introduction</a> first.</p>
<p><b>Build from source</b></p>
<p>Prior to running the examples the latest sources must be checked out and built. This is done by issuing the following commands:</p>
<div class="source"><pre>  svn co https://scm.ops4j.org/repos/ops4j/projects/pax/useradmin useradmin
  cd useradmin
  ./src/scripts/build-all.sh [-s &lt;some URL&gt; ] [ -P integration-test ]</pre>
</div>
<p>The -s option specifies where the generated site is stored - default is <i>/tmp/sites/useradmin</i>.</p>
<p>Using the <i>integration-test</i> profile forces running the integration tests.</p>
<p><b>Basic Framework Configuration &amp; Startup</b></p>
<p>All examples use <a class="externalLink" href="http://paxrunner.ops4j.org/space/Pax+Runner">Pax-Runner</a> to run an OSGi framework and assume Pax-Runner is already installed as described <a class="externalLink" href="http://paxrunner.ops4j.org/display/paxrunner/Installation">here</a>.</p>
<p>The following snippets show the Pax-Runner configurations for various use cases. Just copy the content of the snippet to a file (if not noted otherwise <i>runner.args</i>) and run <i>pax-run.sh</i> or <i>pax-run.bat</i> in the same directory. This will download all specified bundles and framework-code and start the framework in a subdirectory <i>runner</i>. </p>
<p>See the <a class="externalLink" href="http://paxrunner.ops4j.org/display/paxrunner/Options">Pax-Runner options page</a> for details on how to configure Pax-Runner.</p>
<p><b>Additional Bundles</b></p>
<p>The Pax UserAdmin collaborates with the following bundles:</p>
<ul><li><b>Service Bundles</b><table class="bodyTable"><tbody><tr class="a"><td align="left">Service</td>
<td align="left">Tested Implementation(s)</td>
<td align="left">Purpose</td>
</tr>
<tr class="b"><td align="left">- <a class="externalLink" href="http://www.osgi.org/javadoc/r4v42/org/osgi/service/log/package-summary.html">OSGi LogService</a></td>
<td align="left"><a class="externalLink" href="http://wiki.ops4j.org/display/paxlogging/Pax+Logging">Pax Logging</a></td>
<td align="left">Log messages for later analysis.</td>
</tr>
<tr class="a"><td align="left">- <a class="externalLink" href="http://www.osgi.org/javadoc/r4v42/org/osgi/service/event/package-summary.html">OSGi EventAdmin</a></td>
<td align="left"><a class="externalLink" href="http://felix.apache.org/site/apache-felix-event-admin.html">Felix Event Admin</a></td>
<td align="left">Deliver events.</td>
</tr>
<tr class="b"><td align="left">- <a class="externalLink" href="http://www.osgi.org/javadoc/r4v42/org/osgi/service/cm/package-summary.html">OSGi ConfigAdmin</a></td>
<td align="left"><a class="externalLink" href="http://felix.apache.org/site/apache-felix-configuration-admin-service.html">Felix Configuration Admin</a></td>
<td align="left">Deliver configuration data to services.</td>
</tr>
<tr class="a"><td align="left">- <a class="externalLink" href="http://www.osgi.org/javadoc/r4v42/org/osgi/service/prefs/package-summary.html">OSGi Preferences</a></td>
<td align="left"><a class="externalLink" href="http://felix.apache.org/site/apache-felix-preferences-service.html">Felix Preferences Service</a></td>
<td align="left">Manage persistent storage of preferences.</td>
</tr>
</tbody>
</table>
</li>
<li><b>Util Bundles</b><table class="bodyTable"><tbody><tr class="b"><td align="left">Tested Implementation</td>
<td align="left">Purpose</td>
</tr>
<tr class="a"><td align="left"><a class="externalLink" href="http://www.ops4j.org/projects/pax/ldapserver/apacheds/index.html">Pax LdapServer/ApacheDS</a></td>
<td align="left">A bundelized version of the <a class="externalLink" href="http://directory.apache.org/">Apache Directory Service</a>.</td>
</tr>
<tr class="b"><td align="left"><a class="externalLink" href="http://felix.apache.org/site/apache-felix-file-install.html">Felix Fileinstall</a></td>
<td align="left">Watches a directory and acts on adding/removing files from it.</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section"><h2>Single StorageProvider Configuration</h2>
<p>The most common use case is having a single StorageProvider/UserAdmin pair running in an OSGi framework.</p>
<ol type="1"><li>Preferences<div class="source"><pre>scan-composite:mvn:org.ops4j.pax.runner.profiles/compendium/4.2.0/composite
scan-composite:mvn:org.ops4j.pax.runner.profiles/core/4.2.0/composite
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-api/1.3.0
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-service/1.3.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.eventadmin/1.0.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.configadmin/1.0.10
scan-bundle:mvn:org.apache.felix/org.apache.felix.fileinstall/1.0.0
#
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-service/0.0.1-SNAPSHOT
scan-bundle:mvn:org.apache.felix/org.apache.felix.prefs/1.0.2
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-provider-preferences/0.0.1-SNAPSHOT</pre>
</div>
</li>
<li>LDAP with bundled LDAP server<p>Using the LDAP provider together with the pax-ldapserver-apacheds bundle allows to run everything without custom configuration:</p>
<div class="source"><pre>scan-composite:mvn:org.ops4j.pax.runner.profiles/compendium/4.2.0/composite
scan-composite:mvn:org.ops4j.pax.runner.profiles/core/4.2.0/composite
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-api/1.3.0
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-service/1.3.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.eventadmin/1.0.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.configadmin/1.0.10
scan-bundle:mvn:org.apache.felix/org.apache.felix.fileinstall/1.0.0
#
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-service/0.0.1-SNAPSHOT
scan-bundle:mvn:org.ops4j.pax.ldapserver/pax-ldapserver-apacheds/0.2.1
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-provider-ldap/0.0.1-SNAPSHOT</pre>
</div>
</li>
<li>LDAP with external LDAP server<p>If an external LDAP server is used, the framework configuration is bit shorter (as we can omit the bundled LDAP server):</p>
<div class="source"><pre>scan-composite:mvn:org.ops4j.pax.runner.profiles/compendium/4.2.0/composite
scan-composite:mvn:org.ops4j.pax.runner.profiles/core/4.2.0/composite
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-api/1.3.0
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-service/1.3.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.eventadmin/1.0.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.configadmin/1.0.10
scan-bundle:mvn:org.apache.felix/org.apache.felix.fileinstall/1.0.0
#
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-service/0.0.1-SNAPSHOT
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-provider-ldap/0.0.1-SNAPSHOT</pre>
</div>
<p>but the LDAP provider must be configured to access the external LDAP server. Configuration is done via the OSGi ConfigAdmin service using the PID <i>org.ops4j.pax.useradmin.provider.ldap</i> - a simple example configuration file may look like:</p>
<div class="source"><pre>org.ops4j.pax.useradmin.ldap.server.url = ldap.ops4j.org
org.ops4j.pax.useradmin.ldap.server.port = 8099
org.ops4j.pax.useradmin.ldap.root.dn = dc=ops4j,dc=org</pre>
</div>
<p>Store this file as <i>configuration/org.ops4j.pax.useradmin.provider.ldap.cfg</i></p>
</li>
</ol>
</div>
<div class="section"><h2>Multi StorageProvider Configuration</h2>
<p>Sometimes it is desirable to have more than on UserAdmin/StorageProvider pair running in the same framework, i.e. if you want to use the UserAdmin command to copy user data from one instance to another.</p>
<ol type="1"><li>Preferences and Ldap (bundled) provider<div class="source"><pre>scan-composite:mvn:org.ops4j.pax.runner.profiles/compendium/4.2.0/composite
scan-composite:mvn:org.ops4j.pax.runner.profiles/core/4.2.0/composite
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-api/1.3.0
scan-bundle:mvn:org.ops4j.pax.logging/pax-logging-service/1.3.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.eventadmin/1.0.0
scan-bundle:mvn:org.apache.felix/org.apache.felix.configadmin/1.0.10
scan-bundle:mvn:org.apache.felix/org.apache.felix.fileinstall/1.0.0
#
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-service/0.0.1-SNAPSHOT
scan-bundle:mvn:org.ops4j.pax.ldapserver/pax-ldapserver-apacheds/0.2.1
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-provider-ldap/0.0.1-SNAPSHOT
scan-bundle:mvn:org.apache.felix/org.apache.felix.prefs/1.0.2
scan-bundle:mvn:org.ops4j.pax.useradmin/pax-useradmin-provider-preferences/0.0.1-SNAPSHOT</pre>
</div>
</li>
<li>Two providers of the same type<p>Sorry this not implemented. Please use the UserAdmin command to export the data to an intermediate XML file and then run a different framework configuration and import the data.</p>
</li>
</ol>
</div>
<div class="section"><h2>The UserAdmin Command</h2>
<p>The <b>useradmin</b> command allows complex manipulation of user data. Its general synopsis is:</p>
<div class="source"><pre>  &gt; useradmin &lt;subcommand&gt; [&lt;parameter-list&gt;]</pre>
</div>
<p>where <i>parameter-list</i> depends on the actual subcommand used.</p>
<ol type="1"><li>copyData Subcommand<p>The <b>copyData</b> subcommand takes two mandatory parameters:</p>
<div class="source"><pre>  &gt; useradmin copyData &lt;source-uri&gt; &lt;target-uri&gt;</pre>
</div>
<p>Both URIs may denote either a file (starting with file://) or a UserAdmin instance (starting with useradmin://). The source-URI describes the source from which to copy data and the target-URI the target to which the data is written.</p>
</li>
</ol>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2009-2017
    
          OPS4J - Open Participation Software for Java
          
  

  
    
            
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
