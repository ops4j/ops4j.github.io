<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<meta name="author" content="OPS4j">
<title>Pax Web</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Pax Web</h1>
<div class="details">
<span id="author" class="author">OPS4j</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Pax Web</div>
<ul class="sectlevel1">
<li><a href="#PaxWeb-Supported-Tech">1. Supported Technology</a>
<ul class="sectlevel3">
<li><a href="#PaxWeb-PaxWeb4.x">1.1. Pax Web 4.x:</a></li>
<li><a href="#PaxWeb-PaxWeb3.x:">1.2. Pax Web 3.x:</a></li>
<li><a href="#PaxWeb-PaxWeb2.x:">1.3. Pax Web 2.x:</a></li>
<li><a href="#PaxWeb-PaxWeb1.x:">1.4. Pax Web 1.x:</a></li>
</ul>
</li>
<li><a href="#_user_guide">2. User Guide</a>
<ul class="sectlevel2">
<li><a href="#_configuration">2.1. Configuration</a>
<ul class="sectlevel4">
<li><a href="#Configuration-ConfigurationviaOSGiConfigurationAdminService">Configuration via OSGi Configuration Admin Service</a></li>
<li><a href="#Configuration-ConfigurationviaOSGiframework_systempropertiesproperties">Configuration via OSGi framework/system properties properties</a></li>
<li><a href="#_basic_configuration">2.1.3. Basic Configuration</a></li>
<li><a href="#_advanced_jetty_configuration">2.1.4. Advanced Jetty Configuration</a></li>
<li><a href="#_ssl_configuration">2.1.5. SSL Configuration</a></li>
<li><a href="#_jsp_configuration">2.1.6. JSP Configuration</a></li>
</ul>
</li>
<li><a href="#_http_service_extensions">2.2. Http Service Extensions</a>
<ul class="sectlevel3">
<li><a href="#_servlets">2.2.1. Servlets</a></li>
<li><a href="#_filters">2.2.2. Filters</a></li>
<li><a href="#_listeners">2.2.3. Listeners</a></li>
<li><a href="#_error_pages">2.2.4. Error Pages</a></li>
<li><a href="#_welcome_files">2.2.5. Welcome Files</a></li>
<li><a href="#_jsp">2.2.6. JSP</a></li>
</ul>
</li>
<li><a href="#_examples">2.3. Examples</a>
<ul class="sectlevel3">
<li><a href="#HttpServiceusage">2.3.1. Http Service usage</a></li>
<li><a href="#_extended_http_service">2.3.2. Extended http service</a></li>
<li><a href="#_jsp_support">2.3.3. JSP support</a></li>
</ul>
</li>
<li><a href="#_war_extender">2.4. WAR Extender</a>
<ul class="sectlevel3">
<li><a href="#WARExtender-Howdoesitwork">2.4.1. How does it work</a></li>
<li><a href="#WARExtender-Detailedwayofworking">2.4.2. Detailed way of working</a></li>
<li><a href="#WARExtender-Benefits">2.4.3. Benefits</a></li>
<li><a href="#_war_extender_examples">2.4.4. WAR Extender Examples</a></li>
<li><a href="#_osgi_fy_your_war">2.4.5. OSGi-fy your WAR</a></li>
<li><a href="#_supported_web_elements">2.4.6. Supported Web Elements</a></li>
<li><a href="#_war_extender_faq">2.4.7. WAR Extender FAQ</a></li>
</ul>
</li>
<li><a href="#_whiteboard_extender">2.5. Whiteboard Extender</a>
<ul class="sectlevel3">
<li><a href="#WhiteboardExtender-KeepingtrackofHttpServiceavailability">2.5.1. Keeping track of Http Service availability</a></li>
<li><a href="#WhiteboardExtender-Howdoesitwork:">2.5.2. How does it work:</a></li>
<li><a href="#WhiteboardExtender-WhatExtenderwilldo:">2.5.3. What Extender will do:</a></li>
<li><a href="#WhiteboardExtender-Howdoesithelponservletregistration">2.5.4. How does it help on servlet registration</a></li>
<li><a href="#WhiteboardExtender-Howdoesithelponresourceregistration">2.5.5. How does it help on resource registration</a></li>
<li><a href="#WhiteboardExtender-Howdoesithelponfilterregistration">2.5.6. How does it help on filter registration</a></li>
<li><a href="#WhiteboardExtender-Howdoesithelponlistenerregistration">2.5.7. How does it help on listener registration</a></li>
<li><a href="#WhiteboardExtender-Webelements">2.5.8. Web elements</a></li>
<li><a href="#_whiteboard_examples">2.5.9. Whiteboard Examples</a></li>
</ul>
</li>
<li><a href="#_installing_using_karaf_features">2.6. Installing using Karaf-features</a></li>
<li><a href="#_jsp_usage">2.7. JSP Usage</a>
<ul class="sectlevel3">
<li><a href="#JSPUsage-UsageguidelinesforworkingwithJSPs">2.7.1. Usage guidelines for working with JSPs</a></li>
<li><a href="#JSPUsage-HowdoJSPsworkwithPaxWeb">2.7.2. How do JSPs work with Pax Web?</a></li>
<li><a href="#JSPUsage-HowdoJSFworkwithPaxWeb">2.7.3. How do JSF work with Pax Web?</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developer_guide">3. Developer Guide</a>
<ul class="sectlevel2">
<li><a href="#_source">3.1. Source</a>
<ul class="sectlevel3">
<li><a href="#Source-Checkoutsourcecode">3.1.1. Checkout source code</a></li>
<li><a href="#Source-Browsesourcecode">3.1.2. Browse source code</a></li>
</ul>
</li>
<li><a href="#_build">3.2. Build</a></li>
<li><a href="#_artifacts">3.3. Artifacts</a>
<ul class="sectlevel3">
<li><a href="#Artifacts-pax-web-api">3.3.1. pax-web-api</a></li>
<li><a href="#Artifacts-pax-web-spi">3.3.2. pax-web-spi</a></li>
<li><a href="#Artifacts-pax-web-runtime">3.3.3. pax-web-runtime</a></li>
<li><a href="#Artifacts-pax-web-jsp">3.3.4. pax-web-jsp</a></li>
<li><a href="#Artifacts-pax-web-jetty">3.3.5. pax-web-jetty</a></li>
<li><a href="#Artifacts-pax-web-jetty-bundle">3.3.6. pax-web-jetty-bundle</a></li>
<li><a href="#Artifacts-pax-web-extender-war">3.3.7. pax-web-extender-war</a></li>
<li><a href="#Artifacts-pax-web-extender-whiteboard">3.3.8. pax-web-extender-whiteboard</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<link rel="stylesheet"  href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.1.0/css/font-awesome.min.css">
<div class="paragraph">
<p><span class="image"><img src="images/pax-web.png" alt="image"></span><br>
<a href="http://www.osgi.org">OSGi</a> R4 Http Service and Web Applications (OSGi Enterprise Release chapter 128) implementation using
<a href="http://www.eclipse.org/jetty/">Jetty</a> 8 or <a href="http://tomcat.apache.org">Tomcat</a> 7.</p>
</div>
<div class="paragraph">
<p>Pax Web extends
OSGi Http Service with better
<a href="Http-Service-Extensions.html">servlet</a> support,
<a href="Http-Service-Extensions.html">filters</a>,
<a href="Http-Service-Extensions.html">listeners</a>,
<a href="Http-Service-Extensions.html">error pages</a> and
<a href="Http-Service-Extensions.html">JSPs</a> and some others in order
to meet the latest versions of Servlet specs.
Pax Web facilitates an easy installation of WAR bundles as well as
discovery of web elements published as OSGi services. All of this beside
the, standard, programmatic registration as detailed in the HTTP Service
specs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="PaxWeb-Supported-Tech">1. Supported Technology</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Right now following Technologies are supported by Pax Web:</p>
</div>
<div class="sect3">
<h4 id="PaxWeb-PaxWeb4.x">1.1. Pax Web 4.x:</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Pax Web 4.0.0 has not been released yet, it is still SNAPSHOT
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Servlet 3.0</p>
</li>
<li>
<p>JSP 2.0</p>
</li>
<li>
<p>JSF 2.1</p>
</li>
<li>
<p>Jetty 9.0.x</p>
</li>
<li>
<p>Tomcat 7.x (still experimental, but better supported)</p>
</li>
<li>
<p>support of CDI (through Pax-CDI)</p>
</li>
<li>
<p>support of only Servlet 3.0 annotated Servlets in JAR</p>
</li>
<li>
<p>Web-Fragments</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="PaxWeb-PaxWeb3.x:">1.2. Pax Web 3.x:</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Latest stable release is 3.1.1
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Servlet 3.0</p>
</li>
<li>
<p>JSP 1.1.2</p>
</li>
<li>
<p>JSF 2.1</p>
</li>
<li>
<p>Jetty 8.x</p>
</li>
<li>
<p>Tomcat 7.x (still experimental)</p>
</li>
<li>
<p>support of CDI (through Pax-CDI)</p>
</li>
<li>
<p>support of only Servlet 3.0 annotated Servlets in JAR</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="PaxWeb-PaxWeb2.x:">1.3. Pax Web 2.x:</h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Version 2.0 and 2.1 are EOL
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Servlet 3.0</p>
</li>
<li>
<p>JSP 1.1.2</p>
</li>
<li>
<p>JSF 2.1</p>
</li>
<li>
<p>Jetty 8.x</p>
</li>
<li>
<p>support of application binding to a virtual host (Http-Connector) for
WABs</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="PaxWeb-PaxWeb1.x:">1.4. Pax Web 1.x:</h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Version 1.0.x and 1.1.x are EOL
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Servlet 2.5</p>
</li>
<li>
<p>JSP 1.1.2</p>
</li>
<li>
<p>JSF 1.2</p>
</li>
<li>
<p>Jetty 7.x</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_guide">2. User Guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following guides details different aspects of using
Pax Web from the user perspective, where user
means somebody that uses Pax Web.</p>
</div>
<div class="sect2">
<h3 id="_configuration">2.1. Configuration</h3>
<div class="paragraph">
<p>Pax Web can be configured using
Configuration Admin or via framework/system properties.</p>
</div>
<div class="paragraph">
<p>While looking for a configuration property, Pax Web will first use the
property configured via Configuration Admin. If the property is not set
(present), it will look for a framework/system property with the same
name. In the end, if the property is still not present it will use a
default value (when applicable).</p>
</div>
<div class="paragraph">
<p>For cases that requires advanced Jetty configuration read
<a href="Advanced-Jetty-Configuration.html">Advanced Jetty
Configuration</a> page.</p>
</div>
<div class="sect4">
<h5 id="Configuration-ConfigurationviaOSGiConfigurationAdminService">Configuration via OSGi Configuration Admin Service</h5>
<div class="paragraph">
<p>Pax Web can be configured via Configuration
Admin Service (if available) and it supports all properties listed
above.<br>
 The PID used for configuration is "<strong>org.ops4j.pax.web</strong>".</p>
</div>
</div>
<div class="sect4">
<h5 id="Configuration-ConfigurationviaOSGiframework_systempropertiesproperties">Configuration via OSGi framework/system properties properties</h5>
<div class="paragraph">
<p>Pax Web can be configured via osgi
environment properties and it supports all properties from above. Note
that according to OSGi specs if a framework property is not set then the
framework must fallback to using standard Java System properties (set
via vm -D option).</p>
</div>
</div>
<div class="sect3">
<h4 id="_basic_configuration">2.1.3. Basic Configuration</h4>
<div class="paragraph">
<p>The following is a list with basic configuration properties that can be
used to customize Pax Web. If not specified otherwise, the property is
available since <code>Pax Web - 0.2.0</code>
(first version).</p>
</div>
<div id="BasicConfiguration-org.osgi.service.http.port" class="paragraph">
<p><code>org.osgi.service.http.port</code></p>
</div>
<div class="paragraph">
<p>This property specifies the port used for servlets and resources
accessible via HTTP. Default value for this property is 8080.<br>
 You can specify a value of 0 (zero), if you wish to allow Pax Web to
automatically determine a free port to use for HTTP access.</p>
</div>
<div id="BasicConfiguration-org.osgi.service.http.port.secure" class="paragraph">
<p><code>org.osgi.service.http.port.secure</code></p>
</div>
<div class="paragraph">
<p>This property specifies the port used for servlets and resources
accessible via HTTPS. Default value for this property is 8443.<br>
 You can specify a value of 0 (zero), if you wish to allow Pax Web to
automatically determine a free port to use for HTTPS access.</p>
</div>
<div id="BasicConfiguration-org.osgi.service.http.enabled" class="paragraph">
<p><code>org.osgi.service.http.enabled</code></p>
</div>
<div class="paragraph">
<p>This property specifies if the HTTP is enabled. If &#8220;true&#8221; the support
for HTTP access will be enabled. If &#8220;false&#8221; the support for HTTP
access will be disabled. Default value is &#8220;true&#8221;.</p>
</div>
<div id="BasicConfiguration-org.osgi.service.http.secure.enabled" class="paragraph">
<p><code>org.osgi.service.http.secure.enabled</code></p>
</div>
<div class="paragraph">
<p>This property specifies if the HTTPS is enabled. If &#8220;true&#8221; the support
for HTTPS access will be enables. If &#8220;false&#8221; the support for HTTPS
access will be disabled. Default value is &#8220;false&#8221;.</p>
</div>
<div id="BasicConfiguration-org.osgi.service.http.useNIO" class="paragraph">
<p><code>org.osgi.service.http.useNIO</code></p>
</div>
<div class="paragraph">
<p>This property specifies if the connections established use the nio
classes from java. If &#8220;true&#8221; connections are established using NIO, if
&#8220;false&#8221; connections are established the standard way.</p>
</div>
<div id="BasicConfiguration-javax.servlet.context.tempdir" class="paragraph">
<p><code>javax.servlet.context.tempdir</code></p>
</div>
<div class="paragraph">
<p>A temporary directory that can be accessed via the servlet context
attribute with the same name. If not set a default temporary directory
wil be created and used.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.2.2.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.session.timeout" class="paragraph">
<p><code>org.ops4j.pax.web.session.timeout</code></p>
</div>
<div class="paragraph">
<p>The number of minutes after which an inactive session will timeout.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.2.2.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.listening.addresses" class="paragraph">
<p><code>org.ops4j.pax.web.listening.addresses</code></p>
</div>
<div class="paragraph">
<p>This property specifies the comma separated list of addresses used to
provide servlets and resources via HTTP<br>
 (e.g. localhost or localhost,10.0.0.1). Host names or IP addresses can
be used. Default value is &#8220;0.0.0.0&#8221;.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.5.0.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.session.cookie" class="paragraph">
<p><code>org.ops4j.pax.web.session.cookie</code></p>
</div>
<div class="paragraph">
<p>Session cookie name.<br>
 From Jetty documentation:<br>
 Defaults to JSESSIONID.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.6.1.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.session.url" class="paragraph">
<p><code>org.ops4j.pax.web.session.url</code></p>
</div>
<div class="paragraph">
<p>Session URL.<br>
 From Jetty documentation:<br>
 Defaults to jsessionid. If set to null or &#8220;none&#8221; no URL rewriting
will be done</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.6.1.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.worker.name" class="paragraph">
<p><code>org.ops4j.pax.web.worker.name</code></p>
</div>
<div class="paragraph">
<p>Sets worker name for use with Apache mod_proxy_balancer sticky
sessions.<br>
 See: <a href="http://docs.codehaus.org/display/JETTY/Configuring+mod_proxy" class="bare">http://docs.codehaus.org/display/JETTY/Configuring+mod_proxy</a><br>
 Defaults to null.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.6.1
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.config.file" class="paragraph">
<p><code>org.ops4j.pax.web.config.file</code></p>
</div>
<div class="paragraph">
<p>Configures where to look for an external configuration file for the
underlying web container (e.g. Jetty).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.8.0
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.log.ncsa.format" class="paragraph">
<p><code>org.ops4j.pax.web.log.ncsa.format</code></p>
</div>
<div class="paragraph">
<p>Sets the format for logging access logs</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.log.ncsa.format = /yyyy_mm_dd.request.log</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 1.1.0
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.log.ncsa.retainDays" class="paragraph">
<p><code>org.ops4j.pax.web.log.ncsa.retainDays</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.log.ncsa.retainDays = 90</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 1.1.0.
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.log.ncsa.append" class="paragraph">
<p><code>org.ops4j.pax.web.log.ncsa.append</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.log.ncsa.append = true/false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 1.1.0
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.log.ncsa.extended" class="paragraph">
<p><code>org.ops4j.pax.web.log.ncsa.extended</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.log.ncsa.extended = true/false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 1.1.0
</td>
</tr>
</table>
</div>
<div id="BasicConfiguration-org.ops4j.pax.web.log.ncsa.LogTimeZone" class="paragraph">
<p><code>org.ops4j.pax.web.log.ncsa.LogTimeZone</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.log.ncsa.LogTimeZone= GMT</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 1.1.0
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_advanced_jetty_configuration">2.1.4. Advanced Jetty Configuration</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The following
described way of working is only valid starting with version
Pax Web - 0.5.2.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure advanced features of Jetty you may use jetty xml style
configuration files. To make Pax Web aware of your Jety configuration
files you will have to use <strong>fragments</strong>. Be aware that fragment bundles
are not yet fully supported on all OSGi implementations!</p>
</div>
<div class="paragraph">
<p>As an example, its shown enabling JMX in Jetty.</p>
</div>
<div class="paragraph">
<p>To customize Jetty used by Pax Web Service follow instructions:</p>
</div>
<div class="sect7">
<h8 id="_create_a_bundle_fragment_for_pax_web_service_bundle_in_manifest_put">Create a bundle fragment for Pax Web Service bundle - in manifest put:</h8>
<div class="listingblock">
<div class="content">
<pre>Fragment-Host: org.ops4j.pax.web.pax-web-jetty-bundle</pre>
</div>
</div>
<div class="paragraph">
<p>for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Manifest-Version: 1.0
Fragment-Host: org.ops4j.pax.web.pax-web-jetty-bundle
Bundle-Version: 0.1
Bundle-Name: My Jetty config
Bundle-ManifestVersion: 2
Bundle-SymbolicName: my.jetty_config</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you are using
version Pax Web - 0.6.0 you should
use <code>org.ops4j.pax.web.pax-web-service</code> instead of
<code>org.ops4j.pax.web.pax-web-jetty-bundle</code> as value of <code>Fragment-Host</code>.<br>
 This because starting with version
Pax Web - 0.7.0 symbolic name has
been changed as we splited Pax Web into more bundles.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you are using
version the non bundled version of jetty bundle you should use
<code>org.ops4j.pax.web.pax-web-jetty</code> instead of
<code>org.ops4j.pax.web.pax-web-jetty-bundle</code> as value of <code>Fragment-Host</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you are using
Pax Web - 0.5.2 you should
use <code>org.ops4j.pax.web.service</code> instead of
<code>org.ops4j.pax.web.pax-web-service</code> as value of <code>Fragment-Host</code>.<br>
 This because starting with version
Pax Web - 0.6.0 symbolic name has
been changed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect7">
<h8 id="_put_jetty_xml_in_root_directory_of_fragment">put jetty.xml in root directory of fragment</h8>
<div class="paragraph">
<p>For example, take a look at a simple example fragment bundle from Pax
Web that will add an additional connector on port <code>8383</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/jetty-config-fragment/src/main/resources/jetty.xml" class="bare">https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/jetty-config-fragment/src/main/resources/jetty.xml</a></p>
</div>
</div>
<div class="sect7">
<h8 id="_add_fragment_to_your_start_configuration">add fragment to your start configuration</h8>
<div class="paragraph">
<p>If you have logging at DEBUG level enabled, when you start, you should
see in logs something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>DEBUG  pax.web.service.internal.JettyServerImpl  - starting JettyServerImpl{}
DEBUG  pax.web.service.internal.JettyServerImpl  - configure using bundleresource://100/jetty.xml</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the url
&#8220;bundleresource://100/jetty.xml&#8221; from above is just an example as the
url is framework specific
</td>
</tr>
</table>
</div>
</div>
<div class="sect7">
<h8 id="_adding_specialized_contexthandlers">Adding specialized ContextHandlers</h8>
<div class="paragraph">
<p>If you want to add specialized ContextHandlers to the jetty server you
have to be<br>
 careful not to break the way Pax Web works. So Instead of defining a
new<br>
 Collection of Handlers in the jetty.xml you need to add your
specialized ContextHandler to the<br>
 existing Collection.</p>
</div>
<div class="paragraph">
<p>Here is an example where the jetty Default Servlet is used to<br>
 server static content from the file system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>     &lt;Get name="handler"&gt;
        &lt;Call name="addHandler"&gt;
          &lt;Arg&gt;
     &lt;New class="org.eclipse.jetty.servlet.ServletContextHandler"&gt;
              &lt;Set name="contextPath"&gt;/app&lt;/Set&gt;
              &lt;Set name="resourceBase"&gt;/path/to/your/share&lt;/Set&gt;
              &lt;Call name="addServlet"&gt;
                &lt;Arg&gt;org.eclipse.jetty.servlet.DefaultServlet&lt;/Arg&gt;
                &lt;Arg&gt;/&lt;/Arg&gt;
              &lt;/Call&gt;
            &lt;/New&gt;
          &lt;/Arg&gt;
        &lt;/Call&gt;
    &lt;/Get&gt;</pre>
</div>
</div>
</div>
<div class="sect7">
<h8 id="_using_external_jetty_xml_file">using external jetty.xml file</h8>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The following
described way of working is only valid starting with version
Pax Web - 1.0.0.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An external located jetty.xml file can be used for configuration of Pax
Web.<br>
 This can be activated by setting the following property for Pax Web</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.ops4j.pax.web.config.file=&lt;FILE-IN-FILESYSTEM&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For more details on how to configure the Jetty Server take a look at the
official
<a href="http://wiki.eclipse.org/Jetty/Reference/jetty.xml_syntax">jetty.xml
config page</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_configuration">2.1.5. SSL Configuration</h4>
<div class="paragraph">
<p>Pax Web supports SSL (https) via Jetty built
in SSL support. To get used with Jetty support you may read
<a href="http://docs.codehaus.org/display/JETTY/How+to+configure+SSL">How to
configure SSL in Jetty</a> and skip step 4 from that page, as the
configuration part must be done in <a href="Configuration.html">Pax
Web specific way</a>.</p>
</div>
<div class="paragraph">
<p>To enable SSL support you must set the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>org.osgi.service.http.secure.enabled</strong> to <strong>true</strong></p>
</li>
<li>
<p><strong>org.ops4j.pax.web.ssl.keystore</strong> to the path to the keystore to be
used. If not set the default path <strong>${user.home}/.keystore</strong> is used.</p>
</li>
<li>
<p><strong>org.ops4j.pax.web.ssl.password</strong> to the password used for keystore
integrity check. The value can be in plain text or obfuscated ( starting
with OBF: ) as described in
<a href="http://docs.codehaus.org/display/JETTY/How+to+configure+SSL#HowtoconfigureSSL-step4">step
4 of jetty docummentation</a></p>
</li>
<li>
<p><strong>org.ops4j.pax.web.ssl.keypassword</strong> to the password used for keystore.
The value can be in plain text or obfuscated ( starting with OBF: ) as
described in
<a href="http://docs.codehaus.org/display/JETTY/How+to+configure+SSL#HowtoconfigureSSL-step4">step
4 of jetty docummentation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may also set the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>org.osgi.service.http.port.secure</strong> to change the port. Default is
<strong>8443</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is a list with SSL related configuration properties that
can be used to customize Pax Web SSL support. If not specified
otherwise, the property is available since
Pax Web - 0.2.0 (first version).</p>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.keystore" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.keystore</code></p>
</div>
<div class="paragraph">
<p>Path to the keystore file. See
<a href="SSL-Configuration_12059277.html">ops4j:SSL Configuration</a> for
details.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.2.1.
</td>
</tr>
</table>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.keystore.type" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.keystore.type</code></p>
</div>
<div class="paragraph">
<p>This property specifies the keystore type. Defaults to JKS.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.5.0
</td>
</tr>
</table>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.password" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.password</code></p>
</div>
<div class="paragraph">
<p>Password used for keystore integrity check.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.2.1
</td>
</tr>
</table>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.keypassword" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.keypassword</code></p>
</div>
<div class="paragraph">
<p>Password used for keystore.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.2.1
</td>
</tr>
</table>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.clientauthwanted" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.clientauthwanted</code></p>
</div>
<div class="paragraph">
<p>This property specifies, if certificate-based client authentication at
the server is <strong>&#8220;wanted&#8221;</strong>.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.5.0
</td>
</tr>
</table>
</div>
<div id="SSLConfiguration-org.ops4j.pax.web.ssl.clientauthneeded" class="paragraph">
<p><code>org.ops4j.pax.web.ssl.clientauthneeded</code></p>
</div>
<div class="paragraph">
<p>This property specifies, if certificate-based client authentication at
the server is <strong>&#8220;required&#8221;</strong>.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 0.5.0
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_jsp_configuration">2.1.6. JSP Configuration</h4>
<div class="paragraph">
<p>The following is a list with extra configuration properties for JSP
compilation, these can be used to customize Pax Web. If not specified
otherwise, the property is available since
Pax Web - 1.0.0.<br>
 These properties are send to the underlying JSP servlet Container
<a href="http://docs.codehaus.org/display/JETTY/Jsp+Configuration">see</a></p>
</div>
<div class="paragraph">
<p>The default configuration used can be seen via the MetaTypeService or in
the metatype.xml of the runtime bundle.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.scratch.dir" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.scratch.dir</code></p>
</div>
<div class="paragraph">
<p>This property defines the Directory where servlets are generated.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.check.interval" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.check.interval</code></p>
</div>
<div class="paragraph">
<p>Interval in seconds between background recompile checks. Only relevant
if org.ops4j.pax.web.jsp.development=false.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.debug.info" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.debug.info</code></p>
</div>
<div class="paragraph">
<p>Include debugging info in class file.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.development" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.development</code></p>
</div>
<div class="paragraph">
<p>If true, recompilation checks are made on each request.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.enable.pooling" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.enable.pooling</code></p>
</div>
<div class="paragraph">
<p>Determines whether tag handler pooling is enabled.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.ie.classid" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.ie.classid</code></p>
</div>
<div class="paragraph">
<p>Classid used for InternetExplorer</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.java.encoding" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.java.encoding</code></p>
</div>
<div class="paragraph">
<p>Pass through the encoding to use for the compilation.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.keep.generated" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.keep.generated</code></p>
</div>
<div class="paragraph">
<p>Do you want to keep the generated Java files around?</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.log.verbosity.level" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.log.verbosity.level</code></p>
</div>
<div class="paragraph">
<p>Log verbosity level used.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.mapped.file" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.mapped.file</code></p>
</div>
<div class="paragraph">
<p>Support for mapped Files. Generates a servlet that has a print statement
per line of the jsp file.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.tagpool.max.size" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.tagpool.max.size</code></p>
</div>
<div class="paragraph">
<p>Maximum size for tags in pool.</p>
</div>
<div id="JSPConfiguration-org.ops4j.pax.web.jsp.precompilation" class="paragraph">
<p><code>org.ops4j.pax.web.jsp.precompilation</code></p>
</div>
<div class="paragraph">
<p>If jsps should be precompiled (see for more detailse
<a href="http://team.ops4j.org/browse/PAXWEB-370">here</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Pax Web - 2.0.0
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_service_extensions">2.2. Http Service Extensions</h3>
<div class="paragraph">
<p>Pax Web extends OSGi Http Service in
order to align OSGi web support with latest developments of Servlet
specs.</p>
</div>
<div class="paragraph">
<p>In order to make use of this extensions you will have to get hold of a
<strong>WebContainer</strong> service instead of HttpService as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bundleContext.getServiceReference( "org.ops4j.pax.web.service.WebContainer" );</pre>
</div>
</div>
<div class="paragraph">
<p>Having an <code>WebContainer</code> service instance you will be able to
dynamically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>set context parameters for a Http Context</p>
</li>
<li>
<p>register and unregister servlets with
multiple url mappings (including wild card &#8216;*&#8217; support)</p>
</li>
<li>
<p>register and unregister filters into the
URI namespace of Http Service (including wild card &#8216;*&#8217; support)</p>
</li>
<li>
<p>register and unregister event listeners,
for better control over the life cycle of ServletContext, HttpSession
and ServletRequest;</p>
</li>
<li>
<p>register and unregister error pages</p>
</li>
<li>
<p>register and unregister welcome
files</p>
</li>
<li>
<p>enable and disable JSP support</p>
</li>
</ul>
</div>
<div id="HttpServiceExtensions-AccessingtheBundleContext" class="paragraph">
<p>Accessing the <code>BundleContext</code></p>
</div>
<div class="paragraph">
<p>The <code>BundleContext</code> is exposed as attribute of the <code>ServletContext</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>BundleContext ctx = (BundleContext) servletContext.getAttribute(
                                WebContainerConstants.BUNDLE_CONTEXT_ATTRIBUTE);</pre>
</div>
</div>
<div class="sect3">
<h4 id="_servlets">2.2.1. Servlets</h4>
<div class="sect4">
<h5 id="Servlets-RegisterservletbyURLpattern">Register servlet by URL pattern</h5>
<div class="paragraph">
<p><strong><code>public void registerServlet( Servlet servlet, String[] urlPatterns, Dictionary initParams, HttpContext httpContext ) throws ServletException</code></strong><br>
 Registers a servlet.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">servlet</th>
<th class="tableblock halign-left valign-top">The servlet object to register</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">urlPatterns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of url patterns this servlet maps to. Cannot be
null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">initParams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialization arguments for the servlet or null if there
are none. This argument is used by the servlets ServletConfig object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HttpContext object for the registered servlet, or null
if a default HttpContext is to be created and used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServletException  if given servlet object has already been
registered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  in the following situations: servlet
is null urlPatterns is null or empty</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To give a name to the registered servlet you can add an element named
<em>*servlet-name*</em> to <em>initParams</em> and as value the servlet name.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Starting from 0.5.2, Servlet registration can accept servlet name as a direct parameter. See
<a href="http://issues.ops4j.org/jira/browse/PAXWEB-112">here</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
starting with 1.1.4
its possible to filter init parameters. As shown in
<a href="http://wiki.osgi.org/wiki/WebExperience">WebExperience</a> its now possible
to configure the init.parameters for the servlets and filters with the
prefix <strong><em>init.</em></strong><br>
 For background info take a look at
<a href="http://team.ops4j.org/browse/PAXWEB-349">here</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="Servlets-Unregisteraservlet">Unregister a servlet</h5>
<div class="paragraph">
<p><strong><code>public void unregisterServlet( Servlet servlet )</code></strong><br>
 Unregisters a previously registered servlet.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">servlet</th>
<th class="tableblock halign-left valign-top">The servlet to be unregistered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: servlet is null the servlet is
unknown to Web Container (never registered or unregistered before)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_filters">2.2.2. Filters</h4>
<div class="sect4">
<h5 id="Filters-Registerfilters">Register filters</h5>
<div class="paragraph">
<p><code>public void registerFilter( Filter filter, String[] urlPatterns, String[] servletNames, Dictionary initParams, HttpContext httpContext )</code><br>
 Registers a servlet filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">filter</th>
<th class="tableblock halign-left valign-top">The flter to register</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">urlPatterns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of url patterns this filter maps to. Can be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">servletNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of servlets names this filter maps to. Can be
null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">initParams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialization arguments for the servlet or null if there
are none. This argument is used by the filters FilterConfig object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the http context this filter is for. If null a default
http context will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: filter is null both urlPatterns
and servletNames are null or empty</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To give a name to the registered servlet you can add an element named
<strong><em>filter-name</em></strong> to <em>initParams</em> and as value the filter name.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
starting with Pax
Web 1.1.4 its possible to filter init parameters. As shown in
<a href="http://wiki.osgi.org/wiki/WebExperience">WebExperience</a> its now possible
to configure the init.parameters for the servlets and filters with the
prefix <strong><em>init.</em></strong><br>
 For background info take a look at
<a href="http://team.ops4j.org/browse/PAXWEB-349">here</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="Filters-Unregisterfilters">Unregister filters</h5>
<div class="paragraph">
<p><code>public void unregisterFilter( Filter filter )</code><br>
 Unregisters a previously registered servlet filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">filter</th>
<th class="tableblock halign-left valign-top">The servlet filter to be unregistered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: filter is null the filter is
unknown to Web Container (never registered or unregistered before)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_listeners">2.2.3. Listeners</h4>
<div class="sect4">
<h5 id="Listeners-Registereventlisteners">Register event listeners</h5>
<div class="paragraph">
<p><strong><code>public void registerEventListener( EventListener listener, HttpContext httpContext )</code></strong></p>
</div>
<div class="paragraph">
<p>Registers an event listener. Depending on the listener type, the
listener will be notified on different life cycle events. The following
listeners are supported: HttpSessionActivationListener,
HttpSessionAttributeListener, HttpSessionBindingListener,
HttpSessionListener, ServletContextListener,
ServletContextAttributeListener, ServletRequestListener,
ServletRequestAttributeListener.<br>
 Check out Servlet specification for details on what type of event the
registered listener will be notified.</p>
</div>
</div>
<div class="sect4">
<h5 id="Listeners-Unregistereventlisteners">Unregister event listeners</h5>
<div class="paragraph">
<p><strong><code>public void unregisterEventListener( EventListener listener )</code></strong></p>
</div>
<div class="paragraph">
<p>Unregisters a previously registered listener.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">listener</th>
<th class="tableblock halign-left valign-top">The event listener to be unregistered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: listener is null the listener is
unknown to the http service (never registered or unregistered before)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_error_pages">2.2.4. Error Pages</h4>
<div class="sect4">
<h5 id="ErrorPages-Registererrorpages">Register error pages</h5>
<div class="paragraph">
<p><strong><code>public void registerErrorPage( String error, String location, HttpContext httpContext )</code></strong></p>
</div>
<div class="paragraph">
<p>Registers an error page to customize the response sent back to the web
client in case that an exception or error propagates back to the web
container, or the servlet/filter calls sendError() on the response
object for a specific status code.<br>
 Read Servlet specs for details related to error pages.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A fully qualified Exception class name or an error status code.
Cannot be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request path that will fill the response page. The
location must start with an &#8220;/&#8221;. Cannot be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context this error page is for. If null a default
http context will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: error is null or empty location
is null location does not start with a slash &#8220;/&#8221;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="ErrorPages-Unregistererrorpages">Unregister error pages</h5>
<div class="paragraph">
<p><strong><code>public void unregisterErrorPage( String error, HttpContext httpContext )</code></strong></p>
</div>
<div class="paragraph">
<p>Unregisters a previous registered error page.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A fully qualified Exception class name or an error status code
to be unregistered. Cannot be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context from which the error page should be
unregistered. Cannot be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: error is null or empty error
page was not registered before httpContext is null</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_welcome_files">2.2.5. Welcome Files</h4>
<div class="sect4">
<h5 id="WelcomeFiles-Registerwelcomefiles">Register welcome files</h5>
<div class="paragraph">
<p><strong><code>public void registerWelcomeFiles( String[] welcomeFiles, boolean redirect, HttpContext httpContext )</code></strong></p>
</div>
<div class="paragraph">
<p>Registers an ordered list of partial URIs. The purpose of this mechanism
is to allow the deployer to specify an ordered list of partial URIs for
the container to use for appending to URIs when there is a request for a
URI that corresponds to a directory entry in the WAR not mapped to a Web
component.<br>
 Read Servlet specs for details related to welcome files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Available starting Pax Web - 0.3.0.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">welcomeFiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of welcome files paths. Paths must not start or
end with &#8220;/&#8221;.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redirect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the client should be rediected to welcome file or
false if forwarded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context these welcome files is for. If null a
default http context will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: welcome files is null or empty
entries in array are null or empty entries in array start or end with
&#8220;/&#8221;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalStateException  if welcome files are already registered</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="WelcomeFiles-Unregisterwelcomefiles">Unregister welcome files</h5>
<div class="paragraph">
<p><strong><code>public void unregisterWelcomeFiles( HttpContext httpContext )</code></strong></p>
</div>
<div class="paragraph">
<p>Unregisters previous registered welcome files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Available starting with Pax Web - 0.3.0.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context from which the welcome files should be
unregistered. Cannot be null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  if: no welcome files were registered
before httpContext is null</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_jsp">2.2.6. JSP</h4>
<div class="paragraph">
<p>Pax Web has support for Java Server Pages
(JSP) via using
<a href="http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html">Tomcat Jasper
2</a></p>
</div>
<div class="sect4">
<h5 id="JSP-Why">Why</h5>
<div class="paragraph">
<p>Quoted from <a href="http://java.sun.com/products/jsp/">Java Server Pages home
page</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>JavaServer Pages (JSP) technology provides a simplified, fast way to
create dynamic web content. JSP technology enables rapid development of
web-based applications that are server- and platform-independent.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="JSP-Howdoesitwork">How does it work</h5>
<div class="paragraph">
<p>First of all you must have your JSPs (not mandatory but useful). Then
you have to let Pax Web know that you have
jsps by calling the <code>registerJsps()</code> method on <em>WebContainer</em>.<br>
 At runtime you have to also deploy the jsp support bundle
<strong><em>org.ops4j.pax.web.jsp</em></strong> (see installation
instructions bellow) together with Pax
Web.<br>
 You can find an example of the
<a href="Examples_5046927.html#Examples-helloworld-jsp">example page</a>.</p>
</div>
<div class="sect5">
<h6 id="JSP-TagLibs">Tag Libs</h6>
<div class="paragraph">
<p>In order to get your custom tag libs working your TLD files will have to
be reachable in your bundle in &#8220;special&#8221; places:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all <em>tld</em> files in any jar referenced by your <strong><em>Bundle-ClassPath</em></strong>
manifest entry</p>
</li>
<li>
<p>all <em>tld</em> files in <strong><em>WEB-INF</em></strong> directory or sub-directory of <em>WEB-INF</em>
in your bundle jar</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Imported packages
are being searched too as of 1.1.2 and 2.0.0. See PAXWEB-86 and
PAXWEB-130. PAX Web JSPs only scans the META-INF/ directory within each
imported (Import-Package) or required bundle (Require-Bundle), thus
mimicking Jaspers behaviour when searching JAR files for TLDs.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="JSP-EnableJSPsupport">Enable JSP support</h5>
<div class="paragraph">
<p><code>public void registerJsps( String[] urlPatterns, HttpContext httpContext )</code></p>
</div>
<div class="paragraph">
<p>Enables jsp support. For more details take a look
<a href="/wiki/pages/createpage.action?spaceKey=paxweb&amp;title=Pax+Web+-+Jsp&amp;linkCreation=true&amp;fromPageId=5047050">here</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">urlPatterns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of url patterns this jsp support maps to. If
null, a default &#8220;*.jsp&#8221; will be used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context for which the jsp support should be
enabled. If null a default http context will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UnsupportedOperationException  If jsp support is not available
(optional org.ops4j.pax.web.jsp package is not resolved)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="JSP-DisableJSPsupport">Disable JSP support</h5>
<div class="paragraph">
<p><code>public void unregisterJsps( HttpContext httpContext )</code></p>
</div>
<div class="paragraph">
<p>Disable jsp support.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: %;">
<col style="width: %;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The http context for which the jsp support should be
disabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IllegalArgumentException  If http context is null.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UnsupportedOperationException  If jsp support is not available
(optional org.ops4j.pax.web.jsp package is not resolved)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examples">2.3. Examples</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This page is out of Date and needs rework
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pax Web includes a set of examples that
demonstrates its usage. These can be found at the github <a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples">samples</a></p>
</div>
<div class="sect3">
<h4 id="HttpServiceusage">2.3.1. Http Service usage</h4>
<div class="paragraph">
<p>This example shows you how to register a servlet and resources using the
standard Http Service. Source code can be found at the samples on
<a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/helloworld-hs/src/main/java/org/ops4j/pax/web/samples/helloworld/hs/internal/">GitHub</a>.<br>
 Once the example is started (see below) you can point your web browser
to <a href="http://localhost:8080/helloworld/hs" class="bare">http://localhost:8080/helloworld/hs</a>.</p>
</div>
<div class="paragraph">
<p>You can simply start the example by using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
using one of the two methods below:</p>
</div>
<div id="Examples-Downloadtheprovisionfile" class="paragraph">
<p>Download the provision file</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download
<a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-hs.bundles" class="bare">https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-hs.bundles</a>
to an arbitrary location</p>
</li>
<li>
<p>Start Pax Runner from the directory you have downloaded the
provision file:</p>
<div class="listingblock">
<div class="content">
<pre>pax-run sample-helloworld-hs.bundles</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="Examples-Direct" class="paragraph">
<p>Direct</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web.samples/provision!/sample-helloworld-hs.bundles</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extended_http_service">2.3.2. Extended http service</h4>
<div class="paragraph">
<p>This example shows you how to register servlets, resources, filters,
listeners and error pages using the extended Http Service, WebContainer.
Source code can be found in
<a href="https://scm.ops4j.org/repos/ops4j/projects/pax/web/samples/helloworld-wc/src/main/java/org/ops4j/pax/web/samples/helloworld/wc/internal/">SVN</a>.<br>
 Once the example is started (see bellow) you can point your web browser
to</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://localhost:8080/helloworld/wc" class="bare">http://localhost:8080/helloworld/wc</a>  to see the result of servlet
invocation being wrapped by a filter (see example source for details).
In this case the filter is applied based on an url pattern.</p>
</li>
<li>
<p><a href="http://localhost:8080/helloworld/wc/sn/" class="bare">http://localhost:8080/helloworld/wc/sn/</a>  to see the result of servlet
invocation being wrapped by a filter (see example source for details).
In this case the filter is applied based on a servlet name.<br>
 To see that a different filter was applied you can check out the page
title for each of the above urls.
*
<a href="http://localhost:8080/helloworld/wc/error/create?type=java.lang.IllegalArgumentException" class="bare">http://localhost:8080/helloworld/wc/error/create?type=java.lang.IllegalArgumentException</a>
 to see how the error page will be triggered when a servlet throws an
exception. The exception to be thrown is specified by the <em>type</em>
parameter. The error page will display all servlet request attributes
related to an exception page as specified by Servlet spec.</p>
</li>
<li>
<p><a href="http://localhost:8080/helloworld/wc/a.page.that.not.exist" class="bare">http://localhost:8080/helloworld/wc/a.page.that.not.exist</a>  to see how
the error page will be triggered based on the error type (404 in this
case  page not found).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To verify that the listener (a ServletRequestListener is working you can
repeat the request and check out the bottom of the page that displays a
counter for the request made to the server.</p>
</div>
<div class="paragraph">
<p>You can simply start the example by using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
using one of the two methods below:</p>
</div>
<div id="Examples-Downloadtheprovisionfile.1" class="paragraph">
<p>Download the provision file</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download
<a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-wc.bundles" class="bare">https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-wc.bundles</a>
to an arbitrary location</p>
</li>
<li>
<p>Start Pax Runner from the directory you have downloaded the
provision file:</p>
<div class="listingblock">
<div class="content">
<pre>pax-run sample-helloworld-wc.bundles</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="Examples-Direct.1" class="paragraph">
<p>Direct</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web.samples/provision!/sample-helloworld-wc.bundles</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jsp_support">2.3.3. JSP support</h4>
<div class="paragraph">
<p>This example shows you how to register jsps using the extended Http
Service, WebContainer. Source code can be found in
<a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/helloworld-jsp/src/main/java/org/ops4j/pax/web/samples/helloworld/jsp/internal/">SVN</a>.<br>
 Once the example is started (see bellow) you can point your web browser
to</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://localhost:8080/helloworld/jsp/helloworld.jsp" class="bare">http://localhost:8080/helloworld/jsp/helloworld.jsp</a>  to see the
result of invoking a jsp.</p>
</li>
<li>
<p><a href="http://localhost:8080/helloworld/jsp/helloworld-tld.jsp/" class="bare">http://localhost:8080/helloworld/jsp/helloworld-tld.jsp/</a>  to see the
result of invoking a jsp that uses taglibs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can simply start the example by using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
using one of the two methods below:</p>
</div>
<div id="Examples-Downloadtheprovisionfile.2" class="paragraph">
<p>Download the provision file</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download
<a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-jsp.bundles" class="bare">https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/provision/src/main/resources/sample-helloworld-jsp.bundles</a>
to an arbitrary location</p>
</li>
<li>
<p>Start Pax Runner from the directory you have downloaded the
provision file:</p>
<div class="listingblock">
<div class="content">
<pre>pax-run sample-helloworld-jsp.bundles</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="Examples-Direct.3" class="paragraph">
<p>Direct</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web.samples/provision!/sample-deptstore.bundles</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_war_extender">2.4. WAR Extender</h3>
<div class="paragraph">
<p>Pax Web Extender WAR is an extender bundle that makes possible to deploy
WAR files into OSGi.</p>
</div>
<div class="sect3">
<h4 id="WARExtender-Howdoesitwork">2.4.1. How does it work</h4>
<div class="paragraph">
<p>First you should have a war file compliant with Servlet specs. As the
war file will have to be deployed as a bundle the war file must have the
necessary OSGi manifest headers (take a
look what is required and how you can easily add them). Once you have
this preconditions you just have to deploy your bundle in your preferred
OSGi framework. Of course, what you need more is that pax web extender
war bundle to be installed together
with an http service (preferred Pax Web).</p>
</div>
</div>
<div class="sect3">
<h4 id="WARExtender-Detailedwayofworking">2.4.2. Detailed way of working</h4>
<div class="paragraph">
<p>Once installed the war extender will watch over the bundles that get
started / stopped.<br>
 Once your war bundle gets deployed and started, the war extender will
parse your web.xml and registers all elements with http service. If the
http service is <a href="Pax-Web_3375105.html">Pax Web</a> then most likely that
you will get a fully working web application. If the http service is a
standard one some of the elements will not be registered as standard
http service only supports servlets and resources.<br>
 Once your war bundle gets stopped all the prior registered elements
will be unregistered.</p>
</div>
</div>
<div class="sect3">
<h4 id="WARExtender-Benefits">2.4.3. Benefits</h4>
<div class="ulist">
<ul>
<li>
<p>with
<a href="https://ops4j1.jira.com/wiki/display/paxurl/War+Protocol">no</a>/<a href="OSGi-fy-your-WAR_12060384.html">minimum</a>
modifications to your war you can deploy it into an osgi framework</p>
</li>
<li>
<p>you do not depend on any OSGi api</p>
</li>
<li>
<p>you do not have to keep track of http service availability</p>
</li>
<li>
<p>you do not have to register/unregister your
servlets/resources/filters/listeners</p>
</li>
<li>
<p>easy to use</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_war_extender_examples">2.4.4. WAR Extender Examples</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This page is outdated!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>WAR Extender includes a set of
examples that demonstrates its usage. While running the examples bellow
under Felix, version &#8656; 1.0.1 you may get will logging enabled quite a
lot of error messages. You can ignore them as Felix logs a
FrameworkEvent.ERROR every time it cannot find a class, fact that
clashes with Spring way of searching for BeanInfo classes. This issue is
resolved in the upcoming version on Felix.</p>
</div>
<div class="sect7">
<h8 id="WARExtenderExamples-WicketExamples">Wicket Examples</h8>
<div class="paragraph">
<p><a href="http://wicket.apache.org/">Wicket</a> provides an example war file that
includes various <a href="http://wicketstuff.org/wicket13/">examples related to
Wicket</a><br>
 To deploy the wicket examples war (that is available in maven central
repo) you just have to deploy to your preferred OSGi framework the
following bundles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pax Web version &gt;= 0.3.1</p>
</li>
<li>
<p>Pax Web Extender - War version &gt;=
0.3.0</p>
</li>
<li>
<p>JSP API  required by Wicket Examples (you need an OSGi version of it)</p>
</li>
<li>
<p>Wicket Examples war repackaged as bundle
(<a href="https://scm.ops4j.org/repos/ops4j/projects/pax/web/samples/provision/src/main/resources/wicket-examples-1.3.0.bnd">OSGi
manifest headers added</a>)</p>
</li>
<li>
<p>(optional)
<a href="https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging">Pax Logging</a>
 if you want to see also the log output</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively you can easy do the deployment using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web-extender.samples/provision!/wicket-examples-1.3.0-wrap.bundles</pre>
</div>
</div>
<div class="paragraph">
<p>The
<a href="https://scm.ops4j.org/repos/ops4j/projects/pax/web/samples/provision/src/main/resources/wicket-examples-1.3.0-wrap.bundles">wicket-examples-1.3.0-wrap.bundles</a>
file above is a simple text file that lists all the bundles to be
installed.</p>
</div>
<div class="paragraph">
<p>Once you have everything running point your browser to
<a href="http://localhost:8080/wicket.examples/index.html" class="bare">http://localhost:8080/wicket.examples/index.html</a>. Notice that
re-packaging of Wicket Examples War may take a while as the war file has
about 9Mb (depending on your connection speed - file is downloaded from
maven central repository). Anyhow, this is done just first time you run
the example and it helps if you already have the war file in your local
maven repository.</p>
</div>
<div class="paragraph">
<p>You can start it up even simpler by using the new
<a href="https://ops4j1.jira.com/wiki/display/paxurl/War+Protocol">war:</a> protocol
handler (you need
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
version &gt;= 0.6.0):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run war:mvn:org.apache.wicket/wicket-examples/1.3.0/war --profiles=war</pre>
</div>
</div>
<div class="paragraph">
<p>As you will see the war: protocol handler will do all that is necessary
to directly deploy a war file. Note that in this case the context name
will be generated automatically, so you should use
<a href="http://localhost:8080/mvn_org.apache.wicket_wicket-examples_1.3.0_war/index.html" class="bare">http://localhost:8080/mvn_org.apache.wicket_wicket-examples_1.3.0_war/index.html</a>
to access the application (upcoming version 0.2.0 of war protocol will
permit context name setup).</p>
</div>
</div>
<div class="sect4">
<h5 id="WARExtenderExamples-SpringPetClinic">Spring PetClinic</h5>
<div class="paragraph">
<p><a href="http://www.springframework.org/">Spring</a> provides an
<a href="http://www.springframework.org/docs/petclinic.html">example application
named PetClinic</a>. The Petclinic sample application is designed to show
how the Spring application frameworks can be used to build simple, but
powerful database-oriented enterprise applications.<br>
 To deploy the PetClinic war you will have first to build it by yourself
(Spring PetClinic is not available in a maven repository and anyhow it
needs some small changes):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.springframework.org/docs/petclinic.html">Follow the build
instructions</a> provided by Spring</p>
</li>
<li>
<p>Before building the war file you have to change
<em>petclinic-servlet.xml</em> as follows. You have to do this change not
because of Pax Web but because the <em>&lt;context:component-scan /&gt;</em> does
not work in an OSGi environment (Spring DM guys are working on that).</p>
<div class="ulist">
<ul>
<li>
<p>Edit <em>petclinic-servlet.xml</em></p>
</li>
<li>
<p>Replace line</p>
<div class="listingblock">
<div class="content">
<pre>&lt;context:component-scan base-package="org.springframework.samples.petclinic.web"&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;context:annotation-config/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.ClinicController"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.AddOwnerForm"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.AddPetForm"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.AddVisitForm"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.EditOwnerForm"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.EditPetForm"/&gt;
&lt;bean class="org.springframework.samples.petclinic.web.FindOwnersForm"/&gt;</pre>
</div>
</div>
</li>
<li>
<p>Save the file and build Spring PetClinic according to instructions</p>
</li>
</ul>
</div>
</li>
<li>
<p>Start the PetClinic database (not required but otherwise you cannot
use the whole application)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then deploy to your preferred OSGi framework the following bundles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pax Web version &gt;= 0.3.1</p>
</li>
<li>
<p>JSP version &gt;= 0.3.1</p>
</li>
<li>
<p>Pax Web Extender - War version &gt;= 0.3.0</p>
</li>
<li>
<p>PetClinic war repackaged as bundle
(<a href="https://scm.ops4j.org/repos/ops4j/projects/pax/web/samples/provision/src/main/resources//spring-petclinic-2.5-wrap.bnd">OSGi
manifest headers added</a>)</p>
</li>
<li>
<p>(optional)
<a href="https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging">Pax Logging</a>
 if you want to see also the log output</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively you can easy do the deployment using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
(you must start Pax Runner from PetClinics dist directory so it can
find the war file):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web-extender.samples/provision!/spring-petclinic-2.5-wrap.bundles</pre>
</div>
</div>
<div class="paragraph">
<p>The
<a href="https://scm.ops4j.org/repos/ops4j/projects/pax/web/samples/provision/src/main/resources/spring-petclinic-2.5-wrap.bundles">spring-petclinic-2.5-wrap.bundles</a>
file above is a simple text file that lists all the bundles to be
installed.</p>
</div>
<div class="paragraph">
<p>Once you have everything running point your browser to
<a href="http://localhost:8080/petclinic/index.jsp" class="bare">http://localhost:8080/petclinic/index.jsp</a>. Notice that re-packaging of
Spring PetClinic war file may take a while as the war file has about
15Mb. Anyhow, this is done just first time you run the example.</p>
</div>
<div class="paragraph">
<p>Note also then when running under Felix version before 1.0.3 you will
see quite a lot of stack traces displayed on the screen (if you have
logging enabled). Just ignore them as they are only log messages from
Felix shown when a class cannot be found and Spring tries to load
classes related to bean support, classes that do not exist. This (error
messages) are all gone if you use Felix &gt;= 1.0.3.</p>
</div>
<div class="paragraph">
<p>You can start it up even simpler by using the new
<a href="https://ops4j1.jira.com/wiki/display/paxurl/War+Protocol">war:</a> protocol
handler (you need
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>
version &gt;= 0.6.0):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run war:file:petclinic.war --profiles=war mvn:org.ops4j.pax.web/pax-web-jsp</pre>
</div>
</div>
<div class="paragraph">
<p>As you will see the war: protocol handler will do all that is necessary
to directly deploy a war file. Spring PetClinic makes use of JSP so the
command line provision also <a href="JSP_5047050.html">Pax Web JSP Support</a>.
Note that in this case the context name will be generated automatically,
so you should use <a href="http://localhost:8080/file_petclinic.war/" class="bare">http://localhost:8080/file_petclinic.war/</a> to access
the application (upcoming version 0.2.0 of war protocol will permit
context name setup).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using the above mentioned methods involves that Spring Petclinic WAR
file is processed first by <code>war:</code> url protocol handler in order to make
it a bundle. As the WAR file is particularly large it requires
&#8220;extensive&#8221; resources to process in terms of memory, so you may
encounter <code>java.lang.StackOverflowError</code> or <code>java.lang.OutOfMemoryError</code>
depending on your execution platform (Windows/*nix) as they differ in
&#8220;defaults&#8221;. To avoid this problems you will have to set some extra
start up parameters for JVM, such as:
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.StackOverflowError</code>: \{-Xss}}, as for example <code>-Xss=512k</code></p>
</li>
<li>
<p><code>java.lang.OutOfMemoryError</code>: <code>-Xmx</code>, as for example <code>-Xmx256m</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It may be that the example values are too much or too less for your case
so feel free to experiment.<br>
 In order to set this options you have to do the following (example uses
both settings but you may only need one of them):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows:</p>
<div class="listingblock">
<div class="content">
<pre>set JAVA_OPTS=-Xss512k -Xmx256m
pax-run ...</pre>
</div>
</div>
</li>
<li>
<p>*nix</p>
<div class="listingblock">
<div class="content">
<pre>export JAVA_OPTS=-Xss512k -Xmx256m
pax-run ...</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_osgi_fy_your_war">2.4.5. OSGi-fy your WAR</h4>
<div class="paragraph">
<p>This page explains what it takes to make a standard war file deployable
into OSGi. For detailed information read <em>OSGi Service Platform Core
Specification</em> section 3.2  <em>Module Layer  Bundles</em>. The pages
specified bellow refers to <em>Release 4, Version 4.1 April 2007</em>.</p>
</div>
<div class="paragraph">
<p>The quickest way is for your project to use Maven and utilize Maven
Bundle Plugin to generate OSGi manifest for your WAR project. See:
<a href="https://ops4j1.jira.com/wiki/display/ops4j/Getting+the+benefits+of+maven-bundle-plugin+in+other+project+types">Getting
the benefits of maven-bundle-plugin in other project types</a></p>
</div>
<div class="paragraph">
<p>If you opt for a lower level way, read on</p>
</div>
<div class="paragraph">
<p>First of all the war has to be a valid OSGi bundle. As minimum the war
file must contain the following manifest headers in
<code>META-INF/MANIFEST.MF</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>Bundle-ManifestVersion: 2</em></strong>  This header defines that the bundle
follows the rules of R4 specification.</p>
</li>
<li>
<p><strong><em>Bundle-SymbolicName</em></strong>  This header specifies a unique,
non-localizable name for this bundle. This name should be based on the
reverse domain name convention. See <em>Bundle-SymbolicName</em> on page 35.</p>
</li>
<li>
<p>(optional) <strong><em>Bundle-Version</em></strong>  This header specifies the version of
this bundle. The default value is 0.0.0. See <em>Version</em> on page 28.</p>
</li>
<li>
<p>(optional) <strong><em>Bundle-Name</em></strong>  This header defines a readable name for
this bundle. This should be a short, human-readable name that can
contain spaces.</p>
</li>
<li>
<p>(optional) <strong><em>Bundle-Vendor</em></strong>  This header contains a human-readable
description of the bundle vendor.</p>
</li>
<li>
<p>(optional) <strong><em>Bundle-Copyright</em></strong>  This header contains the copyright
specification for this bundle.</p>
</li>
<li>
<p>(optional) <strong><em>Webapp-Context</em></strong>  servlet context path. If not specified
<em>Bundle-SymbolicName</em> will be used. Note that this header is a War
extender specific header not an OSGi header.
<span class="image"><img src="images/images/icons/emoticons/warning.png" alt="(warning)"></span> Deprecated since
1.0.0 use</p>
</li>
<li>
<p>(optional) <strong><em>Web-ContextPath</em></strong>  servlet context path, as specified in
the OSGi spec. If not specified <em>Bundle-SymbolicName</em> will be used. Note
this is a official OSGi header.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have this header, will suffice to deploy the war into OSGi. But
this is not enough to have it working in most of the situations as OSGi
has a very strict class loading policy. So next, you will have to
specify how the classes you need in runtime will be found via the
following headers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>Bundle-ClassPath</em></strong>  This header defines a comma-separated list of
JAR file path names or directories (inside the bundle) containing
classes and resources. The period (.) specifies the root directory of
the bundles JAR. The period is also the default. See <em>Bundle Class
Path</em> on page 49.</p>
</li>
<li>
<p><strong><em>Import-Package</em></strong>  This header declares the imported packages for
this bundle. See <em>Import-Package Header</em> on page 36.</p>
</li>
<li>
<p>(not recommended) <strong><em>Require-Bundle</em></strong>  This header specifies the
required exports from another bundle. See <em>Require-Bundle</em> on page 65.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most likely the above headers will have to have the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>Bundle-ClassPath</em></strong> :</p>
<div class="ulist">
<ul>
<li>
<p><code>WEB_INF/classes</code>  this will find any class / file in
WEB-INF/classes</p>
</li>
<li>
<p><code>lib/&lt;dependency&gt;.jar</code>  you should have an entry for each jar you
have in your lib directory, where <em>&lt;dependency&gt;</em> is the name of jar<br>
 So, as an example the header can look like:<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Bundle-ClassPath: WEB-INF/classes,lib/commons-logging.jar,lib/spring.jar</code>
* <strong><em>Import-Package</em></strong> : should contain any package that your web
application depends on but is not included into one of your dependencies
that you listed in the <em>Bundle-ClassPath</em> header. Usually a war will not
include <em>J2EE</em> apis:
<strong> <code>javax.servlet</code> - servlet api
</strong> <code>javax.servlet.http</code> - servlet api<br>
 So, as an example the header can look like:<br>
 <code>Import-Package: javax.servlet,javax.servlet.http</code></p>
</div>
<div class="paragraph">
<p>Now you are ready to
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">deploy your
war</a>. If you still get class loading exceptions then is most likely that
you did not include all the jars you need in the <em>Bundle-ClassPath</em> or
<em>Import-Package</em>.</p>
</div>
<div class="sect4">
<h5 id="OSGi-fyyourWAR-Preprocess">Preprocess</h5>
<div class="paragraph">
<p>If you find this process hard to grasp or if you cannot change the
manifest of your war or maybe you simple want to automate it take a look
at how you can automate it in a
<a href="/wiki/pages/createpage.action?spaceKey=paxweb&amp;title=static&amp;linkCreation=true&amp;fromPageId=12060384">static</a>
or
<a href="/wiki/pages/createpage.action?spaceKey=paxweb&amp;title=dynamic&amp;linkCreation=true&amp;fromPageId=12060384">dynamic</a>
way. You may also use
<a href="https://ops4j1.jira.com/wiki/display/paxurl/War+Protocol">War Protocol</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_supported_web_elements">2.4.6. Supported Web Elements</h4>
<div class="paragraph">
<p>The following is a list showing what elements are supported in both
standard http service and Pax Web. If the
list bellow does not contain the descriptior element you are looking for
it means that is not (yet) supported.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>*context name*</em> : name of the context (known as context path)</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span> Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service
: servlets/resources will be deployed into the root path (&#8216;`&#8217;')</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*context params*</em> : &lt;context-param&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*session timeout*</em> : &lt;session-config&gt; / &lt;session-timeout&gt; element in
web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web (starting with version 0.4.0)</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*servlets*</em> : &lt;servlet&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*servlets init params*</em> : &lt;servlet&gt;&lt;init-param&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*servlets mapping*</em> : &lt;servlet-mapping&gt; elements in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span> Standard Http Service
: only exact match, no wild card (&#8220;*&#8221;) support</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*filters*</em> : &lt;filter&gt; elements in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*filters init params*</em> : &lt;filter&gt;&lt;init-param&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*filters mapping*</em> : &lt;filter-mapping&gt; elements in web.xml; both
&lt;url-pattern&gt; and &lt;servlet-name&gt;</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*listeners*</em> : &lt;listener&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*error pages*</em> : &lt;error-page&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*welcome files*</em> : &lt;welcome-file-list&gt; element in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/error.png" alt="(error)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>*mime mappings*</em> : &lt;mime-mapping&gt; elements in web.xml</p>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span>
Pax Web</p>
</li>
<li>
<p><span class="image"><img src="images/icons/emoticons/check.png" alt="(tick)"></span> Standard Http Service</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_war_extender_faq">2.4.7. WAR Extender FAQ</h4>
<div class="sect4">
<h5 id="_is_the_order_the_bundles_are_installed_started_important">Is the order the bundles are installed / started important?</h5>
<div class="paragraph">
<p>No. Http service (Pax Web), war extender or
your war bundle(s) can be installed / uninstalled / started / stopped in
any order. Everything will function as you expect.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_will_happen_if_i_stop_uninstall_my_war">What will happen if I stop / uninstall my war?</h5>
<div class="paragraph">
<p>All the registered elements for the web application corresponding to the
stopped war (servlet context, servlets, resources, filters, listeners)
will be unregistered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_if_i_restart_it_or_update_it">What if I restart it? Or update it?</h5>
<div class="paragraph">
<p>A new web application corresponding to your war will be registered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_happens_if_i_stop_uninstall_the_http_service">What happens if I stop / uninstall the http service?</h5>
<div class="paragraph">
<p>All deployed web applications will be unregistered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_if_i_restart_it">What if I restart it?</h5>
<div class="paragraph">
<p>New web applications will be registered for all deployed wars.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_happens_if_i_stop_uninstall_the_pax_war_extender">What happens if I stop / uninstall the pax war extender?</h5>
<div class="paragraph">
<p>All deployed web applications will be unregistered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_what_if_i_restart_it_2">What if I restart it?</h5>
<div class="paragraph">
<p>New web applications will be registered for all deployed wars.</p>
</div>
</div>
<div class="sect4">
<h5 id="_i_have_a_standard_war_can_i_deploy_it_into_an_osgi_framework">I have a standard war. Can I deploy it into an OSGi framework?</h5>
<div class="paragraph">
<p>Yes,
OSGi-fy-your-WAR tells you how you can do that.</p>
</div>
</div>
<div class="sect4">
<h5 id="_i_do_not_want_can_change_the_war_can_i_still_deploy_it">I do not want / can change the war. Can I still deploy it?</h5>
<div class="paragraph">
<p>Yes, you can do that in a
static or dynamic way.</p>
</div>
</div>
<div class="sect4">
<h5 id="_now_that_i_deployed_my_war_how_can_i_get_a_service_from_osgi_service_registry">Now that I deployed my war, how can I get a service from OSGi Service Registry?</h5>
<div class="paragraph">
<p>A deployed war is as any OSGi bundle. A bundle accesses the OSGi
frameworks services through the bundles <em>BundleContext</em>. To enable a
web application to access its <em>BundleContext</em> you must develop a
<em>BundleActivator</em> and add the <em>Bundle-Activator</em> manifest header. This
<em>BundleActivator</em> should store the <em>BundleContext</em> in a location that is
accessible by the applications servlets, filters or listeners. You can
achieve this by using a static field/method set by your
<em>BundleActivator</em> or store it in a <em>ServletContext</em> attribute.</p>
</div>
</div>
<div class="sect4">
<h5 id="_my_application_uses_jsps_are_them_supported">My application uses JSPs. Are them supported?</h5>
<div class="paragraph">
<p>Yes, JSPs are supported via Pax Web
Extensions. Take a look at how you can enable JSP
support.</p>
</div>
</div>
<div class="sect4">
<h5 id="_how_can_i_set_the_servlet_context_path">How can I set the servlet context path?</h5>
<div class="paragraph">
<p>Pax Web War extender will use as servlet path by default the symbolic
name of the bundle. If you want to change that you can set the
<code>Webapp-Context</code> manifest attribute to the name you want. This attribute
should be set into the manifest (MANIFEST.MF) of the bundle that
contains the web app (same bundle as the one containing the web.xml
file). For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Web-ContextPath: myApp</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_whiteboard_extender">2.5. Whiteboard Extender</h3>
<div class="paragraph">
<p>Pax Web Extender Whiteboard is an extender bundle that ease the pain of
registering servlets, resources, filters and listeners and keeping track
of Http Service availability.<br>
 Note it is not mandatory for the extender to work with Pax Web, it can
work with any Http Service implementation.</p>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-KeepingtrackofHttpServiceavailability">2.5.1. Keeping track of Http Service availability</h4>
<div class="paragraph">
<p>There are many situations that you have to handle as a bundle developer
to keep track of http service availability:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Http Service is not present</p>
</li>
<li>
<p>The Http Service gets started after your bundle starts</p>
</li>
<li>
<p>The service gets unregister during the lifetime of your servlet</p>
</li>
<li>
<p>A new service gets registered</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pax Web Extender handles all of this cases for you. You just have to
have a servlet <span class="image"><img src="images/icons/emoticons/smile.png" alt="(smile)"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Howdoesitwork:">2.5.2. How does it work:</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Publish your web elements using one of the
methods below;</p>
</li>
<li>
<p>Start the Pax Web Extender bundle. It does not matter if the
Extender starts before or after you bundle or if is not even installed
by the time your bundle starts.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-WhatExtenderwilldo:">2.5.3. What Extender will do:</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once it starts it will find out all published web elements;</p>
</li>
<li>
<p>Once a http service become available (including the moment when
Extender starts) it will register all the
published web elements;</p>
</li>
<li>
<p>If the in use http service gets unregister it will automatically
unregister the (already) registered web elements;</p>
</li>
<li>
<p>If you register a web element as a service it will register it automatically with the http
service in use (if any);</p>
</li>
<li>
<p>If you unregister a web element it will unregister it automatically from the http service (if
was registered before);</p>
</li>
<li>
<p>If you stop your bundle all registered web elements are automatically
unregistered</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Howdoesithelponservletregistration">2.5.4. How does it help on servlet registration</h4>
<div class="paragraph">
<p>Usually you will have to register servlets by getting an http service
and registering each servlet you have with the http service.<br>
 By using the whiteboard approach you will just have to register each
servlet that you expect to be published to an http service under the
Servlet interface (<a href="http://issues.ops4j.org/jira/browse/PAXWEBEX-2">see in
jira</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Dictionary props = new Hashtable();
props.put( "alias", "/whiteboard" );
props.put("servlet-name", "My Servlet");
bundleContext.registerService( Servlet.class.getName(), new MyServlet(), props );</pre>
</div>
</div>
<div class="paragraph">
<p>This is all you have to do to register a servlet. As you can see there
is no necessity to lookup a http service or to track its availability.</p>
</div>
<div class="paragraph">
<p>Nice to know: your bundle will not have to import/depend on Http Service
packages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Registering
with Servlet names becomes necessary if you want to register a Filter
against it. See below.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Howdoesithelponresourceregistration">2.5.5. How does it help on resource registration</h4>
<div class="paragraph">
<p>Usually you will have to register resources by getting an http service
and registering each resource dir you have with the http service.<br>
 By using the whiteboard approach you will just have to register each
resource dir that you expect to be published to an http service under
the Resources class (<a href="http://issues.ops4j.org/jira/browse/PAXWEBEX-4">see
in jira</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import org.ops4j.pax.web.extender.whiteboard.ResourceMapping;
import org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping;
...
DefaultResourceMapping resourceMapping = new DefaultResourceMapping();
resourceMapping.setAlias( "/whiteboardresources" );
resourceMapping.setPath( "/images" );
bundleContext=bundleContext.registerService( ResourceMapping.class.getName(), resourceMapping, null );</pre>
</div>
</div>
<div class="paragraph">
<p>Dont forget to import org.ops4j.pax.web.extender.whiteboard package.</p>
</div>
<div class="paragraph">
<p>This is all you have to do to register resources. As you can see there
is no necesity to lookup a http service or to track its availablity.
The resources are served upon exact match, so listing directories in
this fashion is not supported right now.</p>
</div>
<div class="paragraph">
<p>Note: your bundle must import org.ops4j.pax.web.extender.whiteboard
package.</p>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Howdoesithelponfilterregistration">2.5.6. How does it help on filter registration</h4>
<div class="paragraph">
<p>Filters can be registered against URL Patterns and/or against Servlets
(identified using their names).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Dictionary props = new Hashtable();
String[] urls = {"/foo", "/protected"};
String[] servlets = {"My Servlet", "Faces Servlet"};
props.put("filter-name", "My Crazy Filter");
props.put("urlPatterns", urls);
props.put("servletNames", servlets);
bundleContext.registerService(Filter.class.getName(), new MyCrazyFilter(), props );</pre>
</div>
</div>
<div class="paragraph">
<p>NOTE:
1.  For URL Patterns, the pattern registered must be already mapped,
either as Resource or a Servlet alias - e.g there should already be a
Resource or aServlet registered to the path <code>/foo</code>.
2.  For Servlet names, the names used should have been the name that has
been explicitly given to the Servlet (as <code>servlet-name</code>), when
registering.</p>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Howdoesithelponlistenerregistration">2.5.7. How does it help on listener registration</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
TODO
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="WhiteboardExtender-Webelements">2.5.8. Web elements</h4>
<div class="paragraph">
<p>By web elements we mean any of http context, servlet, resources, filter,
listener.</p>
</div>
</div>
<div class="sect3">
<h4 id="_whiteboard_examples">2.5.9. Whiteboard Examples</h4>
<div class="paragraph">
<p>Whiteboard Extender includes a set of examples that demonstrates its usage.</p>
</div>
<div class="sect4">
<h5 id="WhiteboardExamples-Whiteboard">Whiteboard</h5>
<div class="paragraph">
<p>The whiteboard example publishes web elements supported by whiteboard
extender. To run the example you have to deploy to your preferred OSGi
framework the following bundles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pax Web version &gt;= 0.3.1</p>
</li>
<li>
<p>Whiteboard Extender version &gt;= 0.3.0</p>
</li>
<li>
<p><a href="https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/whiteboard/">Whiteboard
example</a></p>
</li>
<li>
<p>(optional)
<a href="https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging">Pax Logging</a>
 if you want to see also the log output</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively you can easy do the deployment using
<a href="https://ops4j1.jira.com/wiki/display/paxrunner/Pax+Runner">Pax Runner</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pax-run scan-file:jar:mvn:org.ops4j.pax.web-extender.samples/provision!/sample-whiteboard.bundles</pre>
</div>
</div>
<div class="paragraph">
<p>Once you have everything running point your browser to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://localhost:8080/whiteboard" class="bare">http://localhost:8080/whiteboard</a>  to see a simple servlet output</p>
</li>
<li>
<p><a href="http://localhost:8080/" class="bare">http://localhost:8080/</a>  to see a simple servlet output mapped to root</p>
</li>
<li>
<p><a href="http://localhost:8080/whiteboardresources/ops4j.png" class="bare">http://localhost:8080/whiteboardresources/ops4j.png</a>  to get a logo
registered by publishing a resource</p>
</li>
<li>
<p><a href="http://localhost:8080/forbidden/" class="bare">http://localhost:8080/forbidden/</a>  to try to access a security
protected servlet</p>
</li>
<li>
<p><a href="http://localhost:8080/whiteboard/filtered" class="bare">http://localhost:8080/whiteboard/filtered</a>  to access the whiteboard
filter (see above) but through a filter</p>
</li>
<li>
<p>on any request you can take a look in the java console to see a
request filter in action</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_using_karaf_features">2.6. Installing using Karaf-features</h3>
<div class="paragraph">
<p>Pax Web provides a set of feature-descriptors for
<a href="http://karaf.apache.org/">Apache Karaf</a> for convenient installation. To
enable these features, add them in Karaf using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>features:addurl mvn:org.ops4j.pax.web/pax-web-features/2.1.0/xml/features</pre>
</div>
</div>
<div class="paragraph">
<p>When you type <code>features:list</code> now, you will see the following features
available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>State         Version           Name                          Repository              Description
[uninstalled] [8.1.4.v20120524] pax-jetty                     org.ops4j.pax.web-2.1.0 Provide Jetty engine support
[uninstalled] [2.1.0          ] pax-http                      org.ops4j.pax.web-2.1.0 Implementation of the OSGI HTTP Service
[uninstalled] [2.1.0          ] pax-http-whiteboard           org.ops4j.pax.web-2.1.0 Provide HTTP Whiteboard pattern support
[uninstalled] [2.1.0          ] pax-war                       org.ops4j.pax.web-2.1.0 Provide support of a full WebContainer</pre>
</div>
</div>
<div class="paragraph">
<p>You can now install each of these features using <code>features:install</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jsp_usage">2.7. JSP Usage</h3>
<div class="sect3">
<h4 id="JSPUsage-UsageguidelinesforworkingwithJSPs">2.7.1. Usage guidelines for working with JSPs</h4>
<div class="paragraph">
<p>This page will give you some guidelines how to use the most out of pax
web regarding JSPs.</p>
</div>
<div class="paragraph">
<p>First of all get to know the possible
jsp configuration properties,
these might help you already.</p>
</div>
<div class="sect4">
<h5 id="JSPUsage-ProvidedpackagesbytheJSPbundle">Provided packages by the JSP bundle</h5>
<div class="paragraph">
<p>Following packages are exported by the JSP bundle of Pax Web:</p>
</div>
<div class="paragraph">
<p>JSP in version 1.1.2</p>
</div>
<div class="listingblock">
<div class="content">
<pre>javax.servlet.jsp; version="1.1.2"
javax.servlet.jsp.el; version="1.1.2"
javax.servlet.jsp.jstl.core; version="1.1.2"
javax.servlet.jsp.jstl.fmt; version="1.1.2"
javax.servlet.jsp.jstl.sql; version="1.1.2"
javax.servlet.jsp.jstl.tlv; version="1.1.2"</pre>
</div>
</div>
<div class="paragraph">
<p>JSP in version 2.1</p>
</div>
<div class="listingblock">
<div class="content">
<pre>javax.servlet.jsp; version="2.1"
javax.servlet.jsp.el; version="2.1"
javax.servlet.jsp.jstl.core; version="2.1"
javax.servlet.jsp.jstl.fmt; version="2.1"
javax.servlet.jsp.jstl.sql; version="2.1"
javax.servlet.jsp.jstl.tlv; version="2.1"
javax.servlet.jsp.resources; version="2.1"
javax.servlet.jsp.tagext; version="2.1"</pre>
</div>
</div>
<div class="paragraph">
<p>Javax el in version 2.1</p>
</div>
<div class="listingblock">
<div class="content">
<pre>javax.el;version="2.1.0"
com.sun.el;version="2.1.0.v20091210"
com.sun.el.lang;version="2.1.0.v20091210"
com.sun.el.parser;version="2.1.0.v20091210"
com.sun.el.util;version="2.1.0.v20091210"</pre>
</div>
</div>
<div class="paragraph">
<p>Jasper compiler</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.apache.jasper;version="2.1.0.v20091210"
 org.apache.jasper.compiler;version="2.1.0.v20091210"
 org.apache.jasper.compiler.tagplugin;version="2.1.0.v20091210"
 org.apache.jasper.resources;version="2.1.0.v20091210"
 org.apache.jasper.runtime;version="2.1.0.v20091210"
 org.apache.jasper.security;version="2.1.0.v20091210"
 org.apache.jasper.servlet;version="2.1.0.v20091210"
 org.apache.jasper.tagplugins.jstl;version="2.1.0.v20091210"
 org.apache.jasper.util;version="2.1.0.v20091210"
 org.apache.jasper.xmlparser;version="2.1.0.v20091210"</pre>
</div>
</div>
<div class="paragraph">
<p>Standard Taglibs</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.apache.taglibs.standard
org.apache.taglibs.standard.extra.spath
org.apache.taglibs.standard.functions
org.apache.taglibs.standard.lang.jstl
org.apache.taglibs.standard.lang.jstl.parser
org.apache.taglibs.standard.lang.jstl.test
org.apache.taglibs.standard.lang.jstl.test.beans
org.apache.taglibs.standard.lang.support
org.apache.taglibs.standard.resources
org.apache.taglibs.standard.tag.common.core
org.apache.taglibs.standard.tag.common.fmt
org.apache.taglibs.standard.tag.common.sql
org.apache.taglibs.standard.tag.common.xml
org.apache.taglibs.standard.tag.el.core
org.apache.taglibs.standard.tag.el.fmt
org.apache.taglibs.standard.tag.el.sql
org.apache.taglibs.standard.tag.el.xml
org.apache.taglibs.standard.tag.rt.core
org.apache.taglibs.standard.tag.rt.fmt
org.apache.taglibs.standard.tag.rt.sql
org.apache.taglibs.standard.tag.rt.xml
org.apache.taglibs.standard.tei
org.apache.taglibs.standard.tlv</pre>
</div>
</div>
<div class="paragraph">
<p>Eclipse Compiler for compiling JSP pages</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.eclipse.jdt.core
org.eclipse.jdt.core.compiler
org.eclipse.jdt.core.compiler.batch
org.eclipse.jdt.internal.antadapter
org.eclipse.jdt.internal.compiler
org.eclipse.jdt.internal.compiler.apt.dispatch
org.eclipse.jdt.internal.compiler.apt.model
org.eclipse.jdt.internal.compiler.apt.util
org.eclipse.jdt.internal.compiler.ast
org.eclipse.jdt.internal.compiler.batch
org.eclipse.jdt.internal.compiler.classfmt
org.eclipse.jdt.internal.compiler.codegen
org.eclipse.jdt.internal.compiler.env
org.eclipse.jdt.internal.compiler.flow
org.eclipse.jdt.internal.compiler.impl
org.eclipse.jdt.internal.compiler.lookup
org.eclipse.jdt.internal.compiler.parser
org.eclipse.jdt.internal.compiler.parser.diagnose
org.eclipse.jdt.internal.compiler.problem
org.eclipse.jdt.internal.compiler.tool
org.eclipse.jdt.internal.compiler.util</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="JSPUsage-HowdoJSPsworkwithPaxWeb">2.7.2. How do JSPs work with Pax Web?</h4>
<div class="paragraph">
<p>Standard JSPs are handled by Pax Web through a specialized Servlet that
does use the Jasper compiler with a extra class loader. This class
loader takes the current bundle (the war) and its containing jars into
account for compiling the JSP files. Tag libs are searched within this
war and its containing jars. With version 1.1.0 the bundles which are
imported by the war are also taken into the class loader for searching
the right TLD files.</p>
</div>
</div>
<div class="sect3">
<h4 id="JSPUsage-HowdoJSFworkwithPaxWeb">2.7.3. How do JSF work with Pax Web?</h4>
<div class="paragraph">
<p>Since version 1.0.2 and 1.1.0 JSF is supported by Pax Web.</p>
</div>
<div class="paragraph">
<p>Standard war files should work out of the box since
<a href="https://ops4j1.jira.com/wiki/display/paxurl/Pax+URL+-+1.3.0">Pax Url -
1.3.0</a> does optionally import the exported packages of Pax Web.</p>
</div>
<div class="paragraph">
<p>For Web Application Bundles - war archives with Manifest - it is
required not only to import the <em>javax.el</em> package but also the
implementation of it which is <em>com.sun.el.*</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developer_guide">3. Developer Guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following guides details different aspects of
Pax Web internals and are aimed towards
developers that wants to understand the inner workings of
Pax Web and/or develop/maintain current code
base of Pax Web and/or develop extensions in
top of Pax Web.</p>
</div>
<div class="sect2">
<h3 id="_source">3.1. Source</h3>
<div class="sect3">
<h4 id="Source-Checkoutsourcecode">3.1.1. Checkout source code</h4>
<div class="paragraph">
<p>You can checkout the source code of Pax Web by using the following
command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone git://github.com/ops4j/org.ops4j.pax.web.git</pre>
</div>
</div>
<div class="paragraph">
<p>or you may use your IDE specific support for Git.</p>
</div>
</div>
<div class="sect3">
<h4 id="Source-Browsesourcecode">3.1.2. Browse source code</h4>
<div class="paragraph">
<p>You can browse the source code by pointing your browse to
<code>http://github.com/ops4j/org.ops4j.pax.web</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build">3.2. Build</h3>
<div class="paragraph">
<p>The following instructions are explaining how to build
Pax Web by using
<a href="http://maven.apache.org">Apache Maven</a>. You may also use another means
for building as for example your preferred IDE, since most IDEs will
support Maven.</p>
</div>
<div class="paragraph">
<p>To build Pax Web follow this steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download and
<a href="http://maven.apache.org/download.html#Installation">install Apache Maven</a></p>
</li>
<li>
<p>Download the latest source from OPS4J Pax
Web GIT Repository</p>
</li>
<li>
<p>In a terminal window go the the root folder where you have downloaded
the source and execute the following command:</p>
<div class="listingblock">
<div class="content">
<pre>mvn install</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_artifacts">3.3. Artifacts</h3>
<div class="paragraph">
<p>Starting with version 0.7.0 had been
refactored into more artifacts (bundles, in order to provide better
modularity. Also, additional bundles are present due to merging of Pax
Web Extender.</p>
</div>
<div class="paragraph">
<p>If you are using a Pax Web version before 0.7.0 please refer to
Artifacts (before 0.7.0).</p>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-api">3.3.1. pax-web-api</h4>
<div class="paragraph">
<p>This artifact contains Pax Web API which are the classes that are added
in extension to standard HTTP
Service. This is the only artifact you should depend, at compile time,
if you are in need of Pax Web extensions.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-spi">3.3.2. pax-web-spi</h4>
<div class="paragraph">
<p>This artifact contains the interfaces that should be implemented by a
service provider wishing to provide an alternative implementation that
is not Jetty based. The Jetty artifact
implements this SPI in order to be used by Pax Web
Runtime.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-runtime">3.3.3. pax-web-runtime</h4>
<div class="paragraph">
<p>This artifact is the core of Pax Web (the engine if you like so). It
implements the API and will make use of an
SPI, such as
Jetty in order to fulfill is job.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-jsp">3.3.4. pax-web-jsp</h4>
<div class="paragraph">
<p>This artifact contains Pax Web JSP support based on Jasper. It is an
optional component that will be used by
runtime if present. If you do not use JSPs
in your project you can leave this artifact out of your deployment
setup.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-jetty">3.3.5. pax-web-jetty</h4>
<div class="paragraph">
<p>This artifact is the Jetty based implementation of
SPI. This artifact <strong>does not include</strong>
Jetty, so you will have to deploy Jetty along by yourself. The reason
behind not including Jetty is to allow you to make your choice about the
version of Jetty to be used, as for example, in case that a new version
of Jetty is available and you are in need to use it.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-jetty-bundle">3.3.6. pax-web-jetty-bundle</h4>
<div class="paragraph">
<p>This artifact is a convenience artifact that bundles together most of
the artifacts above plus a version of jetty. This in order to make your
deployment easier. It includes the following:
pax-web-api,
pax-web-spi,
pax-web-runtime,
pax-web-jetty and necessary jetty bundles.
Basically, if you deploy this bundle you are good to go without any
additional bundles (beside the jsp or extenders that you should deploy
as you need).</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-extender-war">3.3.7. pax-web-extender-war</h4>
<div class="paragraph">
<p>This artifact is the implementation of
Pax Web WAR Extender and should be
included in case that you want to deploy WAR files into the OSGi
framework.</p>
</div>
</div>
<div class="sect3">
<h4 id="Artifacts-pax-web-extender-whiteboard">3.3.8. pax-web-extender-whiteboard</h4>
<div class="paragraph">
<p>This artifact is the implementation of
Pax Web Whiteboard Extender and
should be included if you wish to publish your web elements simply by
registering them as a service.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-01-11 21:24:05 MEZ
</div>
</div>
</body>
</html>